var ne=t=>{throw TypeError(t)};var te=(t,e,s)=>e.has(t)||ne("Cannot "+s);var i=(t,e,s)=>(te(t,e,"read from private field"),s?s.call(t):e.get(t)),d=(t,e,s)=>e.has(t)?ne("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),h=(t,e,s,a)=>(te(t,e,"write to private field"),a?a.call(t,s):e.set(t,s),s),C=(t,e,s)=>(te(t,e,"access private method"),s);var Z=(t,e,s,a)=>({set _(r){h(t,e,r,s)},get _(){return i(t,e,a)}});import{d as ae,c as G,f as Ae,t as ie}from"../chunks/8pBSnZaF.js";import{X as De,Y as Fe,t as qe,a2 as ke,aw as Ee,w as Se,j as $e,v as be,G as ee,y as Pe,C as we,Q as Re,ar as Te,J as U,ax as He,K as J,L as se}from"../chunks/ByYTnEOl.js";import{p as Ie,l as Qe,s as Oe,i as Ke}from"../chunks/Rc9X4m-y.js";import{S as Me,h as _e,Q as Ne,n as y,m as oe,R as je,c as Ge,a as ue,b as M,e as Be,d as ze,f as Le,i as Ue,o as he,r as ce,j as Je,k as le,p as de,s as Xe,l as Ye,q as re,I as xe}from"../chunks/tUTIP_XE.js";import{i as Ve}from"../chunks/DDvcRfJS.js";import{o as Ze,a as We}from"../chunks/DMohYbEs.js";function et(t,e,...s){var a=t,r=ke,n;De(()=>{r!==(r=e())&&(n&&(Ee(n),n=null),n=qe(()=>r(a,...s)))},Fe),Se&&(a=$e)}const tt=!1,Qt=Object.freeze(Object.defineProperty({__proto__:null,ssr:tt},Symbol.toStringTag,{value:"Module"}));var v,ye,st=(ye=class extends Me{constructor(e={}){super();d(this,v);this.config=e,h(this,v,new Map)}build(e,s,a){const r=s.queryKey,n=s.queryHash??_e(r,s);let o=this.get(n);return o||(o=new Ne({cache:this,queryKey:r,queryHash:n,options:e.defaultQueryOptions(s),state:a,defaultOptions:e.getQueryDefaults(r)}),this.add(o)),o}add(e){i(this,v).has(e.queryHash)||(i(this,v).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=i(this,v).get(e.queryHash);s&&(e.destroy(),s===e&&i(this,v).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){y.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return i(this,v).get(e)}getAll(){return[...i(this,v).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(a=>oe(s,a))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(a=>oe(e,a)):s}notify(e){y.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){y.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){y.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},v=new WeakMap,ye),b,f,H,P,A,ge,at=(ge=class extends je{constructor(e){super();d(this,P);d(this,b);d(this,f);d(this,H);this.mutationId=e.mutationId,h(this,f,e.mutationCache),h(this,b,[]),this.state=e.state||it(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){i(this,b).includes(e)||(i(this,b).push(e),this.clearGcTimeout(),i(this,f).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){h(this,b,i(this,b).filter(s=>s!==e)),this.scheduleGc(),i(this,f).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){i(this,b).length||(this.state.status==="pending"?this.scheduleGc():i(this,f).remove(this))}continue(){var e;return((e=i(this,H))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var r,n,o,c,w,k,E,Q,S,B,z,O,$,Y,L,p,g,x,R,V;h(this,H,Ge({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(l,T)=>{C(this,P,A).call(this,{type:"failed",failureCount:l,error:T})},onPause:()=>{C(this,P,A).call(this,{type:"pause"})},onContinue:()=>{C(this,P,A).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>i(this,f).canRun(this)}));const s=this.state.status==="pending",a=!i(this,H).canStart();try{if(!s){C(this,P,A).call(this,{type:"pending",variables:e,isPaused:a}),await((n=(r=i(this,f).config).onMutate)==null?void 0:n.call(r,e,this));const T=await((c=(o=this.options).onMutate)==null?void 0:c.call(o,e));T!==this.state.context&&C(this,P,A).call(this,{type:"pending",context:T,variables:e,isPaused:a})}const l=await i(this,H).start();return await((k=(w=i(this,f).config).onSuccess)==null?void 0:k.call(w,l,e,this.state.context,this)),await((Q=(E=this.options).onSuccess)==null?void 0:Q.call(E,l,e,this.state.context)),await((B=(S=i(this,f).config).onSettled)==null?void 0:B.call(S,l,null,this.state.variables,this.state.context,this)),await((O=(z=this.options).onSettled)==null?void 0:O.call(z,l,null,e,this.state.context)),C(this,P,A).call(this,{type:"success",data:l}),l}catch(l){try{throw await((Y=($=i(this,f).config).onError)==null?void 0:Y.call($,l,e,this.state.context,this)),await((p=(L=this.options).onError)==null?void 0:p.call(L,l,e,this.state.context)),await((x=(g=i(this,f).config).onSettled)==null?void 0:x.call(g,void 0,l,this.state.variables,this.state.context,this)),await((V=(R=this.options).onSettled)==null?void 0:V.call(R,void 0,l,e,this.state.context)),l}finally{C(this,P,A).call(this,{type:"error",error:l})}}finally{i(this,f).runNext(this)}}},b=new WeakMap,f=new WeakMap,H=new WeakMap,P=new WeakSet,A=function(e){const s=a=>{switch(e.type){case"failed":return{...a,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...a,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:e.error,failureCount:a.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=s(this.state),y.batch(()=>{i(this,b).forEach(a=>{a.onMutationUpdate(e)}),i(this,f).notify({mutation:this,type:"updated",action:e})})},ge);function it(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var _,m,X,me,rt=(me=class extends Me{constructor(e={}){super();d(this,_);d(this,m);d(this,X);this.config=e,h(this,_,new Set),h(this,m,new Map),h(this,X,0)}build(e,s,a){const r=new at({mutationCache:this,mutationId:++Z(this,X)._,options:e.defaultMutationOptions(s),state:a});return this.add(r),r}add(e){i(this,_).add(e);const s=W(e);if(typeof s=="string"){const a=i(this,m).get(s);a?a.push(e):i(this,m).set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(i(this,_).delete(e)){const s=W(e);if(typeof s=="string"){const a=i(this,m).get(s);if(a)if(a.length>1){const r=a.indexOf(e);r!==-1&&a.splice(r,1)}else a[0]===e&&i(this,m).delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=W(e);if(typeof s=="string"){const a=i(this,m).get(s),r=a==null?void 0:a.find(n=>n.state.status==="pending");return!r||r===e}else return!0}runNext(e){var a;const s=W(e);if(typeof s=="string"){const r=(a=i(this,m).get(s))==null?void 0:a.find(n=>n!==e&&n.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){y.batch(()=>{i(this,_).forEach(e=>{this.notify({type:"removed",mutation:e})}),i(this,_).clear(),i(this,m).clear()})}getAll(){return Array.from(i(this,_))}find(e){const s={exact:!0,...e};return this.getAll().find(a=>ue(s,a))}findAll(e={}){return this.getAll().filter(s=>ue(e,s))}notify(e){y.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return y.batch(()=>Promise.all(e.map(s=>s.continue().catch(M))))}},_=new WeakMap,m=new WeakMap,X=new WeakMap,me);function W(t){var e;return(e=t.options.scope)==null?void 0:e.id}function fe(t){return{onFetch:(e,s)=>{var E,Q,S,B,z;const a=e.options,r=(S=(Q=(E=e.fetchOptions)==null?void 0:E.meta)==null?void 0:Q.fetchMore)==null?void 0:S.direction,n=((B=e.state.data)==null?void 0:B.pages)||[],o=((z=e.state.data)==null?void 0:z.pageParams)||[];let c={pages:[],pageParams:[]},w=0;const k=async()=>{let O=!1;const $=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(e.signal.aborted?O=!0:e.signal.addEventListener("abort",()=>{O=!0}),e.signal)})},Y=Be(e.options,e.fetchOptions),L=async(p,g,x)=>{if(O)return Promise.reject();if(g==null&&p.pages.length)return Promise.resolve(p);const R={queryKey:e.queryKey,pageParam:g,direction:x?"backward":"forward",meta:e.options.meta};$(R);const V=await Y(R),{maxPages:l}=e.options,T=x?ze:Le;return{pages:T(p.pages,V,l),pageParams:T(p.pageParams,g,l)}};if(r&&n.length){const p=r==="backward",g=p?nt:pe,x={pages:n,pageParams:o},R=g(a,x);c=await L(x,R,p)}else{const p=t??n.length;do{const g=w===0?o[0]??a.initialPageParam:pe(a,c);if(w>0&&g==null)break;c=await L(c,g),w++}while(w<p)}return c};e.options.persister?e.fetchFn=()=>{var O,$;return($=(O=e.options).persister)==null?void 0:$.call(O,k,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=k}}}function pe(t,{pages:e,pageParams:s}){const a=e.length-1;return e.length>0?t.getNextPageParam(e[a],e,s[a],s):void 0}function nt(t,{pages:e,pageParams:s}){var a;return e.length>0?(a=t.getPreviousPageParam)==null?void 0:a.call(t,e[0],e,s[0],s):void 0}var u,D,F,I,K,q,N,j,ve,Ce=(ve=class{constructor(t={}){d(this,u);d(this,D);d(this,F);d(this,I);d(this,K);d(this,q);d(this,N);d(this,j);h(this,u,t.queryCache||new st),h(this,D,t.mutationCache||new rt),h(this,F,t.defaultOptions||{}),h(this,I,new Map),h(this,K,new Map),h(this,q,0)}mount(){Z(this,q)._++,i(this,q)===1&&(h(this,N,Ue.subscribe(async t=>{t&&(await this.resumePausedMutations(),i(this,u).onFocus())})),h(this,j,he.subscribe(async t=>{t&&(await this.resumePausedMutations(),i(this,u).onOnline())})))}unmount(){var t,e;Z(this,q)._--,i(this,q)===0&&((t=i(this,N))==null||t.call(this),h(this,N,void 0),(e=i(this,j))==null||e.call(this),h(this,j,void 0))}isFetching(t){return i(this,u).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return i(this,D).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=i(this,u).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),s=i(this,u).build(this,e),a=s.state.data;return a===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(ce(e.staleTime,s))&&this.prefetchQuery(e),Promise.resolve(a))}getQueriesData(t){return i(this,u).findAll(t).map(({queryKey:e,state:s})=>{const a=s.data;return[e,a]})}setQueryData(t,e,s){const a=this.defaultQueryOptions({queryKey:t}),r=i(this,u).get(a.queryHash),n=r==null?void 0:r.state.data,o=Je(e,n);if(o!==void 0)return i(this,u).build(this,a).setData(o,{...s,manual:!0})}setQueriesData(t,e,s){return y.batch(()=>i(this,u).findAll(t).map(({queryKey:a})=>[a,this.setQueryData(a,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=i(this,u).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=i(this,u);y.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=i(this,u),a={type:"active",...t};return y.batch(()=>(s.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries(a,e)))}cancelQueries(t,e={}){const s={revert:!0,...e},a=y.batch(()=>i(this,u).findAll(t).map(r=>r.cancel(s)));return Promise.all(a).then(M).catch(M)}invalidateQueries(t,e={}){return y.batch(()=>{if(i(this,u).findAll(t).forEach(a=>{a.invalidate()}),(t==null?void 0:t.refetchType)==="none")return Promise.resolve();const s={...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"};return this.refetchQueries(s,e)})}refetchQueries(t,e={}){const s={...e,cancelRefetch:e.cancelRefetch??!0},a=y.batch(()=>i(this,u).findAll(t).filter(r=>!r.isDisabled()).map(r=>{let n=r.fetch(void 0,s);return s.throwOnError||(n=n.catch(M)),r.state.fetchStatus==="paused"?Promise.resolve():n}));return Promise.all(a).then(M)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=i(this,u).build(this,e);return s.isStaleByTime(ce(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(M).catch(M)}fetchInfiniteQuery(t){return t.behavior=fe(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(M).catch(M)}ensureInfiniteQueryData(t){return t.behavior=fe(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return he.isOnline()?i(this,D).resumePausedMutations():Promise.resolve()}getQueryCache(){return i(this,u)}getMutationCache(){return i(this,D)}getDefaultOptions(){return i(this,F)}setDefaultOptions(t){h(this,F,t)}setQueryDefaults(t,e){i(this,I).set(le(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...i(this,I).values()],s={};return e.forEach(a=>{de(t,a.queryKey)&&Object.assign(s,a.defaultOptions)}),s}setMutationDefaults(t,e){i(this,K).set(le(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...i(this,K).values()];let s={};return e.forEach(a=>{de(t,a.mutationKey)&&(s={...s,...a.defaultOptions})}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...i(this,F).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=_e(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Xe&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...i(this,F).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){i(this,u).clear(),i(this,D).clear()}},u=new WeakMap,D=new WeakMap,F=new WeakMap,I=new WeakMap,K=new WeakMap,q=new WeakMap,N=new WeakMap,j=new WeakMap,ve);function ot(t,e){be(e,!1);let s=Ie(e,"client",24,()=>new Ce);Ze(()=>{s().mount()}),Ye(s()),We(()=>{s().unmount()}),Ve();var a=ae(),r=ee(a);re(r,e,"default",{}),G(t,a),Pe()}function ut(t,e){const s=Qe(e,["children","$$slots","$$events","$$legacy"]);xe(t,Oe({name:"book"},()=>s,{iconNode:[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"}]],children:(r,n)=>{var o=ae(),c=ee(o);re(c,e,"default",{}),G(r,o)},$$slots:{default:!0}}))}function ht(t,e){const s=Qe(e,["children","$$slots","$$events","$$legacy"]);xe(t,Oe({name:"user-round"},()=>s,{iconNode:[["circle",{cx:"12",cy:"8",r:"5"}],["path",{d:"M20 21a8 8 0 0 0-16 0"}]],children:(r,n)=>{var o=ae(),c=ee(o);re(c,e,"default",{}),G(r,o)},$$slots:{default:!0}}))}function ct(t,e){Re(e,!we(e))}var lt=ie('<div class="absolute right-0 z-10 mt-2 w-48 rounded-md bg-white shadow-lg"><a href="/profile" class="block px-4 py-2 text-gray-800 hover:bg-gray-200">Profile</a> <a href="/settings" class="block px-4 py-2 text-gray-800 hover:bg-gray-200">Settings</a> <a href="/logout" class="block px-4 py-2 text-gray-800 hover:bg-gray-200">Logout</a></div>'),dt=ie(`<nav class="bg-gray-800 py-4"><div class="mx-4 flex items-center justify-between"><div class="flex flex-row items-center space-x-2"><!> <a href="/" class="text-xl font-bold text-white">rell's blog (svelte remake)</a></div> <div class="relative"><button class="flex items-center text-white focus:outline-none"><!></button> <!></div></div></nav>`);function ft(t){let e=Te(!1);var s=dt(),a=U(s),r=U(a),n=U(r);ut(n,{class:"h-8 w-8 fill-current text-white"}),He(2),J(r);var o=se(r,2),c=U(o);c.__click=[ct,e];var w=U(c);ht(w,{class:"h-6 w-6 rounded-full bg-white p-1 text-black"}),J(c);var k=se(c,2);{var E=Q=>{var S=lt();G(Q,S)};Ke(k,Q=>{we(e)&&Q(E)})}J(o),J(a),J(s),G(t,s)}Ae(["click"]);var pt=ie("<!> <!>",1);function Ot(t,e){be(e,!0);const s=new Ce;ot(t,{client:s,children:(a,r)=>{var n=pt(),o=ee(n);ft(o);var c=se(o,2);et(c,()=>e.children),G(a,n)},$$slots:{default:!0}}),Pe()}export{Ot as component,Qt as universal};
